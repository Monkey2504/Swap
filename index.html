<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>SwapACT | SNCB - √âchanges de Services Personnel</title>
    <meta name="description" content="Application d'√©changes de services pour le personnel SNCB avec reconnaissance IA de documents">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'sncb-blue': '#003399',
                        'sncb-light': '#F3F4F6',
                        'accent-blue': '#0055CC',
                        'sncb-red': '#D52B1E',
                        'sncb-yellow': '#FFD700',
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
                        'title': ['Roboto Condensed', 'sans-serif'],
                    },
                    borderRadius: {
                        'sncb': '0.75rem',
                        'sncb-lg': '1.5rem',
                        'sncb-xl': '2rem',
                    }
                }
            }
        }
    </script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Roboto+Condensed:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' fill='%23003399'/><text x='50' y='70' font-family='Arial' font-size='60' text-anchor='middle' fill='white'>S</text></svg>">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Roboto+Condensed:wght@400;500;600;700;800&display=swap');
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: #F3F4F6;
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            color: #1F2937;
        }
        
        #root {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        /* SNCB Brand Patterns */
        .sncb-bg-pattern {
            background: 
                linear-gradient(135deg, #00339922 25%, transparent 25%) -20px 0,
                linear-gradient(225deg, #00339922 25%, transparent 25%) -20px 0,
                linear-gradient(315deg, #00339922 25%, transparent 25%),
                linear-gradient(45deg, #00339922 25%, transparent 25%);
            background-size: 40px 40px;
            background-color: #F3F4F6;
        }
        
        .sncb-gradient {
            background: linear-gradient(135deg, #003399 0%, #0055CC 50%, #003399 100%);
        }
        
        .sncb-text-gradient {
            background: linear-gradient(90deg, #003399 0%, #0055CC 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #F1F1F1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #003399;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #0055CC;
        }
        
        /* Animations */
        @keyframes pulse-sncb {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .animate-pulse-sncb {
            animation: pulse-sncb 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        
        @keyframes slide-in {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .animate-slide-in {
            animation: slide-in 0.3s ease-out;
        }
        
        /* Utility Classes */
        .sncb-shadow {
            box-shadow: 0 4px 20px rgba(0, 51, 153, 0.15);
        }
        
        .sncb-shadow-lg {
            box-shadow: 0 10px 40px rgba(0, 51, 153, 0.2);
        }
        
        .sncb-border {
            border: 2px solid #003399;
        }
        
        .sncb-border-dashed {
            border: 2px dashed #00339980;
        }
        
        /* Loading States */
        .loading-shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .sncb-mobile-padding {
                padding: 1rem;
            }
            
            .sncb-mobile-text {
                font-size: 0.875rem;
            }
        }
        
        /* Print Styles */
        @media print {
            .no-print {
                display: none !important;
            }
            
            body {
                background: white;
                color: black;
            }
        }
        
        /* Dark Mode Support (if needed) */
        @media (prefers-color-scheme: dark) {
            .dark\:sncb-dark-bg {
                background-color: #0F172A;
            }
            
            .dark\:sncb-dark-text {
                color: #E2E8F0;
            }
        }
        
        /* Focus States for Accessibility */
        .sncb-focus:focus {
            outline: 2px solid #003399;
            outline-offset: 2px;
        }
        
        /* Selection Color */
        ::selection {
            background-color: #003399;
            color: white;
        }
    </style>
</head>
<body class="sncb-bg-pattern">
    <!-- Background Decorative Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0">
        <div class="absolute top-1/4 left-1/4 w-64 h-64 rounded-full bg-[#003399]/5 blur-3xl"></div>
        <div class="absolute bottom-1/4 right-1/4 w-96 h-96 rounded-full bg-[#0055CC]/5 blur-3xl"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 h-48 rounded-full bg-[#FFD700]/10 blur-2xl"></div>
    </div>
    
    <!-- SNCB Header Banner (Top) -->
    <div class="fixed top-0 left-0 right-0 bg-sncb-blue text-white py-2 px-4 text-center text-xs font-bold uppercase tracking-widest z-50 no-print">
        <div class="container mx-auto flex items-center justify-center gap-2">
            <span class="animate-pulse-sncb">‚ö°</span>
            <span>SWAPACT V2.0 | PLATEFORME OFFICIELLE D'√âCHANGES SNCB</span>
            <span class="animate-pulse-sncb">‚ö°</span>
        </div>
    </div>
    
    <!-- Main App Container -->
    <div id="root" class="pt-8 z-10 relative"></div>
    
    <!-- SNCB Footer (Bottom) -->
    <div class="fixed bottom-0 left-0 right-0 bg-white/80 backdrop-blur-sm border-t border-gray-200 py-2 px-4 text-center text-xs text-gray-600 z-40 no-print">
        <div class="container mx-auto">
            <p class="font-medium">
                ¬© 2024 SNCB/NMBS - SwapACT. Tous droits r√©serv√©s. 
                <span class="text-sncb-blue font-bold mx-2">|</span> 
                Version: 2.0.1 
                <span class="text-sncb-blue font-bold mx-2">|</span> 
                <a href="mailto:support@swapact.sncb.be" class="text-sncb-blue hover:underline font-semibold">Support Technique</a>
            </p>
            <p class="text-[10px] mt-1 text-gray-500">
                Application s√©curis√©e - Donn√©es crypt√©es - Conforme RGPD - Pour usage interne SNCB uniquement
            </p>
        </div>
    </div>
    
    <!-- Import Map for ES Modules -->
    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.3.1",
            "react-dom": "https://esm.sh/react-dom@18.3.1",
            "react-dom/client": "https://esm.sh/react-dom@18.3.1/client",
            "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@2.45.4",
            "@google/genai": "https://esm.sh/@google/genai@1.3.0",
            "lucide-react": "https://esm.sh/lucide-react@0.453.0?external=react,react-dom",
            "uuid": "https://esm.sh/uuid@10.0.0",
            "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
            "react/": "https://esm.sh/react@^19.2.3/",
            "next": "https://esm.sh/next@^16.1.1",
            "@google-cloud/vision": "https://esm.sh/@google-cloud/vision@5.3.0"
        }
    }
    </script>
    
    <!-- Main Application Script -->
    <script type="module">
        // Initialize the React app
        import { StrictMode } from 'react';
        import { createRoot } from 'react-dom/client';
        
        // Import the main App component (this would be from your compiled bundle)
        // For now, we'll show a loading screen until the real app loads
        const LoadingApp = () => {
            return `
                <div class="h-screen w-full flex flex-col items-center justify-center bg-gradient-to-b from-white to-sncb-light">
                    <div class="text-center space-y-8">
                        <!-- SNCB Logo -->
                        <div class="relative">
                            <div class="w-24 h-24 sncb-gradient rounded-2xl flex items-center justify-center mx-auto shadow-2xl animate-pulse">
                                <svg class="w-12 h-12 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                            </div>
                            <div class="absolute -inset-4 bg-sncb-blue/20 rounded-full blur-xl animate-pulse"></div>
                        </div>
                        
                        <!-- Loading Text -->
                        <div class="space-y-3">
                            <h1 class="text-3xl font-black sncb-text-gradient tracking-tighter">
                                Swap<span class="text-sncb-blue">ACT</span>
                            </h1>
                            <p class="text-sm text-gray-600 font-medium max-w-xs">
                                Plateforme d'√©changes de services pour le personnel SNCB
                            </p>
                        </div>
                        
                        <!-- Loading Progress -->
                        <div class="w-64 h-2 bg-gray-200 rounded-full overflow-hidden">
                            <div class="h-full sncb-gradient animate-[loading_2s_ease-in-out_infinite]"></div>
                        </div>
                        
                        <!-- Loading Details -->
                        <div class="space-y-2">
                            <p class="text-xs text-gray-500 font-medium animate-pulse">
                                Chargement de l'application s√©curis√©e...
                            </p>
                            <div class="flex items-center justify-center gap-2">
                                <div class="w-2 h-2 bg-sncb-blue rounded-full animate-bounce"></div>
                                <div class="w-2 h-2 bg-sncb-blue rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                                <div class="w-2 h-2 bg-sncb-blue rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Security Badge -->
                    <div class="absolute bottom-8 left-0 right-0 text-center">
                        <div class="inline-flex items-center gap-2 px-4 py-2 bg-white/80 backdrop-blur-sm rounded-full text-xs font-bold text-gray-700 border border-gray-200">
                            <svg class="w-3 h-3 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                            </svg>
                            Connexion s√©curis√©e ‚Ä¢ SNCB Internal v2.0
                        </div>
                    </div>
                </div>
            `;
        };
        
        // Create a temporary loading screen
        const loadingHTML = LoadingApp();
        const rootElement = document.getElementById('root');
        rootElement.innerHTML = loadingHTML;
        
        // Add custom animation for loading bar
        const style = document.createElement('style');
        style.textContent = `
            @keyframes loading {
                0% { transform: translateX(-100%); }
                100% { transform: translateX(100%); }
            }
        `;
        document.head.appendChild(style);
        
        // Load the actual React app after a short delay
        setTimeout(async () => {
            try {
                // Dynamically import the main app
                const { default: App } = await import('/index.tsx');
                
                // Clear loading screen
                rootElement.innerHTML = '';
                
                // Create React root and render
                const reactRoot = createRoot(rootElement);
                reactRoot.render(
                    React.createElement(StrictMode, null, 
                        React.createElement(App)
                    )
                );
                
            } catch (error) {
                console.error('Failed to load application:', error);
                rootElement.innerHTML = `
                    <div class="h-screen w-full flex flex-col items-center justify-center bg-white p-6">
                        <div class="max-w-md w-full text-center space-y-6">
                            <div class="w-20 h-20 bg-red-100 text-red-600 rounded-2xl flex items-center justify-center mx-auto">
                                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                </svg>
                            </div>
                            <div>
                                <h2 class="text-2xl font-black text-gray-900 mb-2">Erreur de chargement</h2>
                                <p class="text-gray-600 mb-4">L'application n'a pas pu se charger. Veuillez v√©rifier votre connexion.</p>
                                <p class="text-sm text-gray-500 font-mono bg-gray-100 p-3 rounded">${error.message}</p>
                            </div>
                            <div class="space-y-3">
                                <button onclick="window.location.reload()" class="w-full py-3 bg-sncb-blue text-white rounded-xl font-bold hover:bg-blue-700 transition-colors">
                                    R√©essayer
                                </button>
                                <a href="mailto:support@swapact.sncb.be" class="block text-sm text-sncb-blue hover:underline font-medium">
                                    Contacter le support technique
                                </a>
                            </div>
                        </div>
                    </div>
                `;
            }
        }, 1500);
    </script>
    
    <!-- Google Cloud Vision Test (Development Only) -->
    <script type="module">
        if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            console.log('üîß Mode d√©veloppement activ√©');
            console.log('üåê Google Cloud Vision API: /api/vision/route.js');
            console.log('üîë Pour configurer: Ajoutez GOOGLE_API_KEY dans Vercel');
        }
    </script>
</body>
</html>